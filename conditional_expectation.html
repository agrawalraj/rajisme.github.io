<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title> Conditional Expectation </title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/blog.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
	  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
	});
	</script>

	<script type="text/javascript" async
	  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
	</script>
</head>

<body>
        <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top topnav" role="navigation">
        <div class="container topnav">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand topnav" href="#">Raj's Blog</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#conditionalexpectation">Conditional Expectation</a>
                    </li>

                    <li>
                    	<a href="#articles">Articles</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <div class="container">
    	<div class="blog-header">
        <h1 class="blog-title"></h1>
      </div>

    <div class="row">

		<div class="col-sm-8 blog-main">

		  <div class="blog-post">
		    <h2 class="blog-post-title">Conditional Expectation</h2>
		    <p class="blog-post-meta">June 18, 2016 <!--<a href="#">Raj Agrawal</a></p> -->

		    <h2 class="page header" style="color:#337ab7;">Motivation </h2>

		    <p> Suppose you play either game X or Y. You choose X with probability p and Y with probability 1 - p. Suppose X payes out a $\text{Pois}(\lambda)$ amount and Y a $\text{Pois}(\psi)$. We can write our payout as

            $$\text{Z}_{\text{payout}} = \text{X}\mathbb{I}_{\text{choose X}} + \text{Y}(1 - \mathbb{I}_{\text{choose X}}),$$ 

            where $\mathbb{I}_{\text{choose X}}$ is the indicator random variable that takes 1 with probability p independently of X and Y. What is \ $\mathbb{E}(Z \ | \ \mathbb{I}_{\text{choose X}})$? Before answering this, what should $\mathbb{E}(Z \ | \ \mathbb{I}_{\text{choose X}} = 1)$ be? Well this means you decided to play X which pays out a $\text{Pois}(\lambda)$ amount and this should therefore be $\lambda$. Similarly, $\mathbb{E}[Z \ | \ \mathbb{I}_{\text{choose X}} = 1] = \psi$. To answer the first question, we formalize the above by saying X, Y, and $\mathbb{I}_{\text{choose X}}$ live on the probability space $(\mathbb{P}, \Omega, \mathcal{F})$. Define $A = \{\omega \in \Omega \ \text{s.t.} \ \mathbb{I}_{\text{choose game-1}}(\omega) = 1 \}.$ From above we see 

            $$(*) \ \ \ \mathbb{E}[\text{Z} \ | \ \text{A}] = \lambda \text{,} \ \mathbb{E}[\text{Z} \ | \ \text{A}^c] = \psi.$$ Define 

            $$ \text{H}(\omega) = \mathbb{E}[\text{Z} \ | \ \mathbb{I}_{\text{choose game-1}}](\omega) = \lambda \ \text{if} \ \omega \in \text{A} \ \  \text{or} \ \psi \ \text{if} \ \omega \in \text{A}^c.$$ 

            The key thing to recognize here is that our definition of $\mathbb{E}[\text{Z} \ | \ \mathbb{I}_{\text{choose X}}]$ integrates right. Shortly, we'll explain what we mean by this. In the above example the sigma-algebra generated by $\mathbb{I}_{\text{choose X}}$ is $\mathcal{I} = \{\emptyset, A, A^c, \Omega \}$. </p>

            <h2 class="page header" style="color:#337ab7;"> Case 1: E = A </h2>

            <p> We claim  

            $$\mathbb{E}[\text{H}\mathbb{I}_A] = p\lambda $$ 

            Notice that $H\mathbb{I}_A {\buildrel d \over =} \ \eta$, where $\eta$ is a random variable that takes the constant value $\lambda$ on A and 0 everywhere else. Since A happens with probability p, we get  

            $$\mathbb{E}[\text{H}\mathbb{I}_A] = \mathbb{E}(\eta) = \mathbb{E}[\eta | \text{A}]\mathbb{P}\{\text{A}\} + \mathbb{E}[\eta | \text{A}^c]\mathbb{P}\{\text{A}^c\} = p\lambda .$$ 

            We leave it to you to check that the last line holds for all possible cases. One important thing to note is for $E = \Omega$ we recover the ordinary expected value of Z. This is called the tower property which we'll explore more later on.   


            The last line is what I meant by integrating correctly. Intuitively, it says that the local expected behavior of H is like Z once we restrict it to a valid set. Moreover, if we renormalize by dividng by $\mathbb{P}\{I_E = 1 \}$ we recover $(*)$ by Bayes Rule. At its core this is what conditional expectation is: we define it as the random variable that "integrates" right on the sigma-algebra of events generated by the random variable we are conditioning on. This is a natural definition because at least in the discrete case, this property is required in order to recover the correct value for something like $\mathbb{E}[\text{Z} \ | \ \text{A})]$. Moreover, we see that this implies conditional expectation has to be measurable with respect to the variable we are conditioning on.</p>

            <h2 class="page header" style="color:#337ab7;"> Definition </h2>

            <p> We define the conditional of expectation of the random elements Y given X on the probability space $(\mathbb{P}, \Omega, \mathcal{F})$ as any **version** Z such that

            $$\mathbb{E}[\text{Z}\mathbb{I}_F] = \mathbb{E}[\text{Y}\mathbb{I}_F]$$ for any $\text{F} \in \sigma(X)$. 

            The beauty of using measure theory is in the definition above: we just defined conditional expectation on potentially very abstract elements X and Y. For example, when we get to Brownian Motion X could be a random function (i.e. a stochastic process).  

            In the next section we'll see exactly what "version" means and why such an object exists. </p>

            <h2 class="page header" style="color:#337ab7;"> References </h2>
            
            <p>
            Most of this was inspired by Professor Jim Pitman's probability class I took in Spring 2016. 

            [1] Stat 205B/Math 218B, Jim Pitman, UC Berkeley </p>




            

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>
